import{a as I,b as T,e as D,h as L}from"./chunk-QHV6GGML.js";import{c as P}from"./chunk-OWFKAA2Z.js";import{a as V}from"./chunk-KEFOBVIX.js";import{$ as u,$a as x,Ga as M,Nb as k,Qa as p,Ra as d,T as h,Ua as b,Ub as w,Va as t,Wa as o,Xa as c,Y as C,Z as _,_ as m,_a as v,ab as g,hb as a,ib as S,lb as E,mb as y,nb as O,ua as s}from"./chunk-NYDFPH3R.js";function N(r,e){r&1&&a(0," Sync your GitLab Dashboard settings across multiple devices ")}function j(r,e){r&1&&a(0," Import your settings to login or sync across devices ")}function z(r,e){if(r&1){let n=v();t(0,"div",29)(1,"div",30)(2,"button",31),x("click",function(){C(n);let l=g(2);return _(l.copyToClipboard())}),m(),t(3,"svg",12),c(4,"path",32)(5,"rect",33),o(),u(),t(6,"span"),a(7,"Copy to Clipboard"),o()(),t(8,"button",34),x("click",function(){C(n);let l=g(2);return _(l.downloadFile())}),m(),t(9,"svg",12),c(10,"path",28)(11,"path",14),o(),u(),t(12,"span"),a(13,"Download File"),o()()(),c(14,"textarea",35),o()}if(r&2){let n=g(2);s(14),b("value",n.exportData)}}function G(r,e){if(r&1){let n=v();t(0,"div",4)(1,"div",5)(2,"h2"),a(3,"Export Settings"),o(),t(4,"p",6),a(5," Export your credentials and pinned repositories to use on another device "),o()(),t(6,"div",26)(7,"button",27),x("click",function(){C(n);let l=g();return _(l.exportUserData())}),m(),t(8,"svg",12),c(9,"path",28)(10,"path",14),o(),u(),t(11,"span"),a(12,"Generate Export"),o()(),p(13,z,15,1,"div",29),o()()}if(r&2){let n=g();s(13),d(n.exportData?13:-1)}}function F(r,e){if(r&1&&(t(0,"div",18),m(),t(1,"svg",12),c(2,"circle",36)(3,"path",37),o(),u(),t(4,"span"),a(5),o()()),r&2){let n=g();s(5),S(n.importError)}}function U(r,e){r&1&&(t(0,"div",19),m(),t(1,"svg",12),c(2,"circle",36)(3,"path",38),o(),u(),t(4,"span"),a(5,"Settings imported successfully!"),o()())}function J(r,e){if(r&1){let n=v();t(0,"button",39),x("click",function(){C(n);let l=g();return _(l.clearImport())}),a(1," Clear "),o()}}function A(r,e){r&1&&a(0," What gets exported? ")}function W(r,e){r&1&&a(0," What can be imported? ")}function q(r,e){r&1&&(c(0,"br")(1,"br"),t(2,"strong"),a(3,"Login via Import:"),o(),a(4," You can import a settings file to automatically login without entering credentials manually. "))}var H=class r{authService=h(w);pinService=h(V);router=h(P);exportData="";importData="";importError="";importSuccess=!1;get isLoggedIn(){return this.authService.hasCredentials()}exportUserData(){let e={version:"1.0",exportDate:new Date().toISOString()},n=this.authService.getCredentials();n&&(e.credentials={username:n.username,token:n.token});let i=this.pinService.getPinnedOrder();i.length>0&&(e.pinnedRepos=i),this.exportData=JSON.stringify(e,null,2),this.importError="",this.importSuccess=!1}copyToClipboard(){this.exportData&&navigator.clipboard.writeText(this.exportData).then(()=>{let e=document.querySelector(".copy-button");if(e){let n=e.textContent;e.textContent="Copied!",setTimeout(()=>{e&&(e.textContent=n)},2e3)}}).catch(e=>{console.error("Failed to copy:",e),this.importError="Failed to copy to clipboard"})}downloadFile(){if(this.exportData){let e=new Blob([this.exportData],{type:"application/json"}),n=URL.createObjectURL(e),i=document.createElement("a");i.href=n,i.download=`gitlab-dashboard-export-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n)}}onImportChange(e){let n=e.target;if(n.files&&n.files[0]){let i=n.files[0],l=new FileReader;l.onload=f=>{let R=f.target?.result;this.importData=R,this.importError="",this.importSuccess=!1},l.readAsText(i)}}importUserData(){if(this.importError="",this.importSuccess=!1,!this.importData.trim()){this.importError="Please paste or upload import data";return}try{let e=JSON.parse(this.importData);if(!e.version){this.importError="Invalid export file: missing version";return}let n=!1;if(e.credentials){if(!e.credentials.username||!e.credentials.token){this.importError="Invalid credentials data";return}this.authService.saveCredentials(e.credentials.username,e.credentials.token),n=!0}if(e.pinnedRepos&&Array.isArray(e.pinnedRepos))if(e.pinnedRepos.every(i=>typeof i=="number"))this.pinService.setPinnedOrder(e.pinnedRepos),n=!0;else{this.importError="Invalid pinned repos data: must be array of numbers";return}if(n){this.importSuccess=!0,this.importData="";let i=document.querySelector(".file-input");i&&(i.value=""),e.credentials?setTimeout(()=>{this.router.navigate(["/pipelines"])},1500):setTimeout(()=>{this.importSuccess=!1},3e3)}else this.importError="No valid data found in import file"}catch(e){console.error("Import error:",e),this.importError="Invalid JSON format. Please check your import data."}}clearImport(){this.importData="",this.importError="",this.importSuccess=!1;let e=document.querySelector(".file-input");e&&(e.value="")}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=M({type:r,selectors:[["app-export-import"]],decls:53,vars:9,consts:[[1,"export-import-container"],[1,"page-header"],[1,"subtitle"],[1,"content-grid"],[1,"section-card","card"],[1,"section-header"],[1,"section-description"],[1,"import-content"],[1,"import-methods"],[1,"file-upload-label"],["type","file","accept",".json,application/json",1,"file-input",3,"change"],[1,"file-upload-button","btn","btn-secondary"],["width","16","height","16","viewBox","0 0 16 16","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M8 11V1M8 1L5 4M8 1L11 4","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],["d","M1 13V14C1 14.5523 1.44772 15 2 15H14C14.5523 15 15 14.5523 15 14V13","stroke","currentColor","stroke-width","1.5","stroke-linecap","round"],[1,"import-textarea-container"],[1,"textarea-label"],["placeholder","Paste your export data here...","rows","10",1,"import-textarea",3,"ngModelChange","ngModel"],[1,"error-message"],[1,"success-message"],[1,"import-actions"],[1,"btn","btn-primary",3,"click","disabled"],[1,"btn","btn-ghost"],[1,"info-card","card"],[1,"info-list"],[1,"info-note"],[1,"export-content"],[1,"btn","btn-primary",3,"click"],["d","M8 1V11M8 11L5 8M8 11L11 8","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],[1,"export-result"],[1,"export-actions"],[1,"btn","btn-secondary","copy-button",3,"click"],["d","M6 2H12C12.5523 2 13 2.44772 13 3V9","stroke","currentColor","stroke-width","1.5","stroke-linecap","round"],["x","3","y","6","width","8","height","8","rx","1","stroke","currentColor","stroke-width","1.5"],[1,"btn","btn-secondary",3,"click"],["readonly","","rows","10",1,"export-textarea",3,"value"],["cx","8","cy","8","r","7","stroke","currentColor","stroke-width","1.5"],["d","M8 5V8M8 11H8.01","stroke","currentColor","stroke-width","1.5","stroke-linecap","round"],["d","M5 8L7 10L11 6","stroke","currentColor","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","round"],[1,"btn","btn-ghost",3,"click"]],template:function(n,i){n&1&&(t(0,"div",0)(1,"div",1)(2,"h1"),a(3,"Export & Import Settings"),o(),t(4,"p",2),p(5,N,1,0)(6,j,1,0),o()(),t(7,"div",3),p(8,G,14,1,"div",4),t(9,"div",4)(10,"div",5)(11,"h2"),a(12,"Import Settings"),o(),t(13,"p",6),a(14," Import settings from another device by pasting JSON or uploading a file "),o()(),t(15,"div",7)(16,"div",8)(17,"label",9)(18,"input",10),x("change",function(f){return i.onImportChange(f)}),o(),t(19,"span",11),m(),t(20,"svg",12),c(21,"path",13)(22,"path",14),o(),u(),t(23,"span"),a(24,"Upload JSON File"),o()()()(),t(25,"div",15)(26,"label",16),a(27,"Or paste JSON data:"),o(),t(28,"textarea",17),O("ngModelChange",function(f){return y(i.importData,f)||(i.importData=f),f}),o()(),p(29,F,6,1,"div",18),p(30,U,6,0,"div",19),t(31,"div",20)(32,"button",21),x("click",function(){return i.importUserData()}),m(),t(33,"svg",12),c(34,"path",13)(35,"path",14),o(),u(),t(36,"span"),a(37,"Import Settings"),o()(),p(38,J,2,0,"button",22),o()()()(),t(39,"div",23)(40,"h3"),p(41,A,1,0)(42,W,1,0),o(),t(43,"ul",24)(44,"li"),a(45,"GitLab username and personal access token"),o(),t(46,"li"),a(47,"Pinned repositories and their order"),o()(),t(48,"p",25)(49,"strong"),a(50,"Note:"),o(),a(51," Your credentials are stored in the export file. Keep it secure and don't share it with others. "),p(52,q,5,0),o()()()),n&2&&(s(5),d(i.isLoggedIn?5:6),s(3),d(i.isLoggedIn?8:-1),s(20),E("ngModel",i.importData),s(),d(i.importError?29:-1),s(),d(i.importSuccess?30:-1),s(2),b("disabled",!i.importData.trim()),s(6),d(i.importData?38:-1),s(3),d(i.isLoggedIn?41:42),s(11),d(i.isLoggedIn?-1:52))},dependencies:[k,L,I,T,D],styles:['.export-import-container[_ngcontent-%COMP%]{min-height:calc(100vh - 200px);padding:var(--spacing);background-color:var(--background);max-width:1400px;margin:0 auto}.page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:600;margin-bottom:.5rem;color:var(--foreground)}.subtitle[_ngcontent-%COMP%]{color:var(--muted-foreground);font-size:.875rem}.content-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(400px,1fr));gap:var(--spacing);margin-bottom:2rem}.section-card[_ngcontent-%COMP%]{padding:2rem}.section-header[_ngcontent-%COMP%]{margin-bottom:1.5rem}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin-bottom:.5rem;color:var(--foreground)}.section-description[_ngcontent-%COMP%]{color:var(--muted-foreground);font-size:.875rem;margin:0}.export-content[_ngcontent-%COMP%], .import-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.export-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;flex-wrap:wrap}.export-result[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.export-textarea[_ngcontent-%COMP%], .import-textarea[_ngcontent-%COMP%]{width:100%;padding:1rem;background-color:var(--input);border:1px solid var(--border);border-radius:var(--radius-md);color:var(--foreground);font-family:var(--font-mono);font-size:.8125rem;line-height:1.6;resize:vertical;transition:border-color .2s ease}.export-textarea[_ngcontent-%COMP%]:focus, .import-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--ring);box-shadow:0 0 0 2px oklch(from var(--ring) l c h / .2)}.import-methods[_ngcontent-%COMP%]{display:flex;gap:.75rem}.file-upload-label[_ngcontent-%COMP%]{display:inline-block}.file-input[_ngcontent-%COMP%]{display:none}.file-upload-button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;cursor:pointer}.import-textarea-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.textarea-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--foreground)}.error-message[_ngcontent-%COMP%], .success-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1rem;border-radius:var(--radius-md);font-size:.875rem}.error-message[_ngcontent-%COMP%]{background-color:oklch(from var(--destructive) l c h / .1);border:1px solid var(--destructive);color:var(--destructive)}.success-message[_ngcontent-%COMP%]{background-color:#11ad321a;border:1px solid oklch(65% .2 145);color:#11ad32}.import-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;align-items:center}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.info-card[_ngcontent-%COMP%]{padding:1.5rem;background-color:oklch(from var(--muted) l c h / .5)}.info-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;margin-bottom:1rem;color:var(--foreground)}.info-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0 0 1rem;display:flex;flex-direction:column;gap:.5rem}.info-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:.875rem;color:var(--muted-foreground);padding-left:1.5rem;position:relative}.info-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"\\2022";position:absolute;left:0;color:var(--primary);font-weight:700}.info-note[_ngcontent-%COMP%]{font-size:.8125rem;color:var(--muted-foreground);margin:0;padding:.75rem;background-color:var(--muted);border-radius:var(--radius-md);border-left:3px solid var(--primary)}.info-note[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--foreground)}@media (max-width: 768px){.content-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.section-card[_ngcontent-%COMP%]{padding:1.5rem}.export-actions[_ngcontent-%COMP%], .import-actions[_ngcontent-%COMP%]{flex-direction:column}.export-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .import-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;justify-content:center}}']})};export{H as ExportImportComponent};
